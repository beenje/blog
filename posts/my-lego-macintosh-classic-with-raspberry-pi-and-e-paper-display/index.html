<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>My LEGO Macintosh Classic with Raspberry Pi and e-paper display | Tchut-Tchut Blog</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="http://beenje.github.io/blog/posts/my-lego-macintosh-classic-with-raspberry-pi-and-e-paper-display/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Benjamin Bertrand">
<link rel="prev" href="../dockerfile-anti-patterns-and-best-practices/" title="Dockerfile anti-patterns and best practices" type="text/html">
<link rel="next" href="../running-your-application-over-https-with-traefik/" title="Running your application over HTTPS with traefik" type="text/html">
<meta property="og:site_name" content="Tchut-Tchut Blog">
<meta property="og:title" content="My LEGO Macintosh Classic with Raspberry Pi and e-paper display">
<meta property="og:url" content="http://beenje.github.io/blog/posts/my-lego-macintosh-classic-with-raspberry-pi-and-e-paper-display/">
<meta property="og:description" content="Beginning of April I read an inspiring blog post from Jannis Hermanns
about a LEGO Machintosh Classic with e-paper display.  It was a really nice and cool article.
I've been playing with some Raspberr">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2017-05-23T22:39:12+02:00">
<meta property="article:tag" content="lego">
<meta property="article:tag" content="Mac">
<meta property="article:tag" content="pi">
<meta property="article:tag" content="python">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://beenje.github.io/blog/">

                <span id="blog-title">Tchut-Tchut Blog</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>
                </li>
<li>
<a href="../../rss.xml">RSS feed</a>
                </li>
<li>
<a href="../../stories/about/index.html">About</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
    <a href="index.rst" id="sourcelink">Source</a>
    </li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">My LEGO Macintosh Classic with Raspberry Pi and e-paper display</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                    Benjamin Bertrand
            </span></p>
            <p class="dateline"><a href="." rel="bookmark"><time class="published dt-published" datetime="2017-05-23T22:39:12+02:00" itemprop="datePublished" title="2017-05-23 22:39">2017-05-23 22:39</time></a></p>
                <p class="commentline">
        
    <a href="#disqus_thread" data-disqus-identifier="cache/posts/my-lego-macintosh-classic-with-raspberry-pi-and-e-paper-display.html">Comments</a>


            
        </p>
<p class="sourceline"><a href="index.rst" class="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>Beginning of April I read an inspiring blog post from Jannis Hermanns
about a <a class="reference external" href="https://jann.is/lego-macintosh-classic/">LEGO Machintosh Classic with e-paper display</a>.  It was a really nice and cool article.</p>
<p>I've been playing with some Raspberry Pis before but only with
<a class="reference external" href="../installing-openvpn-on-a-raspberry-pi-with-ansible">software</a>.
I have been willing to fiddle with hardware for some time.
This was the perfect opportunity!</p>
<div class="section" id="lego-digital-designer">
<h2>LEGO Digital Designer</h2>
<p>I decided to try to make my own LEGO Macintosh based on Jannis work.
His blog post is quite detailed with even a list of links with all the
required components.</p>
<p>But I quickly realized there were no LEGO building instructions...
I thus created my own using LEGO Digital Designer, which was fun.
Looking at the pictures on <a class="reference external" href="https://www.flickr.com/photos/_-_/33583084842">Jannis flickr album</a>
helped a lot. But having an exact idea of the screen size wasn't easy on
the computer. So I also built a small prototype of the front part to get a
better idea. For that I had to wait for my e-paper display.</p>
<p>One modification I wanted to do was to use 1U width lego on the side of
the display to require less drilling.
I also wanted to check if it was possible to use the button located on top
of the display.</p>
<p>My .lxf file is on <a class="reference external" href="https://github.com/beenje/legomac/tree/master/ldd">github</a>.</p>
<a class="reference external image-reference" href="../../images/legomac/legomac_ldd.png"><img alt="/images/legomac/legomac_ldd.thumbnail.png" src="../../images/legomac/legomac_ldd.thumbnail.png"></a>
</div>
<div class="section" id="e-paper-display">
<h2>E-paper display</h2>
<p>When I was about to order the <a class="reference external" href="http://www.embeddedartists.com/products/displays/lcd_27_epaper.php">2.7 inch e-paper display from Embedded Artists</a>, I
noticed that Embedded Artists was located in Malmö, where I live :-).</p>
<p>I e-mailed them and I was granted to pick up my order at their office!
A big thanks to them!</p>
</div>
<div class="section" id="raspbery-pi-zero-w">
<h2>Raspbery Pi Zero W</h2>
<p>The Raspberry Pi Zero W comes with Wifi which is really nice.
It does not come with the soldered GPIO header. I was starting to look at
existing soldering iron when I discovered this <a class="reference external" href="https://shop.pimoroni.com/products/gpio-hammer-header">GPIO Hammer Header</a>:</p>
<a class="reference external image-reference" href="../../images/legomac/gpio_hammer_header.jpg"><img alt="/images/legomac/gpio_hammer_header.thumbnail.jpg" src="../../images/legomac/gpio_hammer_header.thumbnail.jpg"></a>
<p>No soldering required!
I used the installation jig and it was really easy to install.
There is a nice <a class="reference external" href="https://youtu.be/VDJ2-feg2lk">video</a> that explains how
to proceed:</p>
<iframe width="480" height="270" src="https://www.youtube.com/embed/VDJ2-feg2lk?feature=oembed" frameborder="0" allowfullscreen></iframe>
</div>
<div class="section" id="connecting-the-display-to-the-pi">
<h2>Connecting the display to the Pi</h2>
<p>Based on Jannis article I initially thought it wasn't possible to use a ribbon
cable (due to space), so I ordered some Jumper Wires.
I connected the display to the Pi using the serial expansion
connector as described in his blog post.
It worked. With the <a class="reference external" href="https://github.com/embeddedartists/gratis">demo from embeddedartists</a>, I managed to display a nice cat picture :-)</p>
<a class="reference external image-reference" href="../../images/legomac/jumper_wires.jpg"><img alt="/images/legomac/jumper_wires.thumbnail.jpg" src="../../images/legomac/jumper_wires.thumbnail.jpg"></a>
<a class="reference external image-reference" href="../../images/legomac/cat.jpg"><img alt="/images/legomac/cat.thumbnail.jpg" src="../../images/legomac/cat.thumbnail.jpg"></a>
<p>I then realized that the serial expansion connector didn't give access to
the button on top of the display. That button could allow some
interactions, like changing mode, which would be nice.
According to my prototype with 1U width lego on the side, using a ribbon cable shouldn't actually be
an issue. So I ordered a <a class="reference external" href="https://thepihut.com/products/downgrade-gpio-ribbon-cable-for-raspberry-pi-40p-to-26p">Downgrade GPIO Ribbon Cable for Raspberry Pi</a>.</p>
<p>It required a little drilling on the right side for the cable to fit. But
not that much. More is needed on the left side to center the screen.
Carried away by my enthusiasm, I actually cut a bit too much on the left side
(using the dremel was fun :-).</p>
<a class="reference external image-reference" href="../../images/legomac/drilling_left.jpg"><img alt="/images/legomac/drilling_left.thumbnail.jpg" src="../../images/legomac/drilling_left.thumbnail.jpg"></a>
<a class="reference external image-reference" href="../../images/legomac/drilling_right.jpg"><img alt="/images/legomac/drilling_right.thumbnail.jpg" src="../../images/legomac/drilling_right.thumbnail.jpg"></a>
<p>Everything fitted nicely in the lego case:</p>
<a class="reference external image-reference" href="../../images/legomac/ribbon_cable.jpg"><img alt="/images/legomac/ribbon_cable.thumbnail.jpg" src="../../images/legomac/ribbon_cable.thumbnail.jpg"></a>
</div>
<div class="section" id="button-on-top">
<h2>Button on top</h2>
<p>With the ribbon cable, the button on top of the display is connected to pin
15 on the Raspberry Pi (BCM GPIO22).
The <cite>ImageDemoButton.py</cite> part of the <a class="reference external" href="https://github.com/embeddedartists/gratis">demo</a>
shows an example how to use the button to change the image displayed.</p>
<p>Using my small prototype, I planned a small hole on top of the case. I thought I'd have to fill
the brick with something hard to press the button. The 1x1 brick ended fitting perfectly.
As shown on the picture below, the side is exactly on top of the button.
I added a little piece of foam inside the brick to keep it straight.</p>
<a class="reference external image-reference" href="../../images/legomac/button_front.jpg"><img alt="/images/legomac/button_front.thumbnail.jpg" src="../../images/legomac/button_front.thumbnail.jpg"></a>
<p>Of course I move away from the Macintosh Classic design here...
but <a class="reference external" href="https://www.python.org/dev/peps/pep-0020/">practicality beats purity</a> :-)</p>
</div>
<div class="section" id="pi-configuration">
<h2>Pi configuration</h2>
<p>Jannis article made me discover <a class="reference external" href="https://resin.io">resin.io</a>,
which is a really interesting project. I did a few tests on a Raspberry Pi 3 and it was a nice experience.
But when I received my Pi Zero W, it wasn't supported by resinOS yet... This isn't the case anymore!
Version 2.0.3 added support for the wifi chip.</p>
<p>Anyway, as Jannis already wrote about resinOS, I'll describe my tests with Raspbian.
To flash the SD card, I recommend <a class="reference external" href="https://etcher.io">Etcher</a> which is an open source project by the same resin.io.
I'm more a command line guy and I have used <cite>dd</cite> many times. But I was pleasantly surprised.
It's easy to install and use.</p>
<ol class="arabic simple">
<li>Download and install <a class="reference external" href="https://etcher.io">Etcher</a>
</li>
<li>Download <a class="reference external" href="https://www.raspberrypi.org/downloads/raspbian/">Raspbian Strecth Lite image</a>
</li>
<li>Flash the SD card using Etcher</li>
<li>Mount the SD card to configure it:</li>
</ol>
<pre class="literal-block">
# Go to the boot partition
# This is an example on OSX (mount point will be different on Linux)
$ cd /Volumes/boot

# To enable ssh, create a file named ssh onto the boot partition
$ touch ssh

# Create the file wpa_supplicant.conf with your wifi settings
# Note that for Raspbian Stretch, you need the first line
# (ctrl_interface...)! This was not the case for Jessie.
$  cat &lt;&lt; EOF &gt; wpa_supplicant.conf
ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
network={
    ssid="MyWifiNetwork"
    psk="password"
    key_mgmt=WPA-PSK
}
EOF

# Uncomment dtparam=spi=on to enable the SPI master driver
$ vi config.txt

# Leave the boot partition
$ cd
</pre>
<ol class="arabic simple" start="5">
<li>Unmount the SD card and put it in the Raspberry Pi</li>
<li>Boot the Pi</li>
</ol>
<p>I wrote a small Ansible playbook to install the E-ink driver and the clock demo:</p>
<pre class="literal-block">
- name: install required dependencies
  apt:
    name: "{{item}}"
    state: present
    update_cache: yes
  with_items:
    - git
    - libfuse-dev
    - fonts-liberation
    - python-pil

- name: check if the epd-fuse service exists
  command: systemctl status epd-fuse.service
  check_mode: no
  failed_when: False
  changed_when: False
  register: epd_fuse_service

- name: clone the embeddedartists gratis repository
  git:
    repo: https://github.com/embeddedartists/gratis.git
    dest: /home/pi/gratis

- name: build the EPD driver and install the epd-fuse service
  shell: &gt;
    COG_VERSION=V2 make rpi-epd_fuse &amp;&amp;
    COG_VERSION=V2 make rpi-install
  args:
    chdir: /home/pi/gratis/PlatformWithOS
  when: epd_fuse_service.rc != 0

- name: ensure the epd-fuse service is enabled and started
  service:
    name: epd-fuse
    state: started
    enabled: yes

- name: install the epd-clock service
  copy:
    src: epd-clock.service
    dest: /etc/systemd/system/epd-clock.service
    owner: root
    group: root
    mode: 0644

- name: start and enable epd-clock service
  systemd:
    name: epd-clock.service
    daemon_reload: yes
    state: started
    enabled: yes
</pre>
<p>To run the playbook, clone the repository <a class="reference external" href="https://github.com/beenje/legomac">https://github.com/beenje/legomac</a>:</p>
<pre class="literal-block">
$ git clone https://github.com/beenje/legomac.git
$ cd legomac
$ ansible-playbook -i hosts -k epd-demo.yml
</pre>
<p>That's it!</p>
<p>Of course don't forget to change the default password on your Pi.</p>
</div>
<div class="section" id="one-more-thing">
<h2>One more thing</h2>
<p>There isn't much Python in this article but the Pi is running some
Python code.
I couldn't resist putting a <a class="reference external" href="https://talkpython.fm">Talk Python To Me</a>
sticker on the back :-)
It's really a great podcast and you should definitevely give it a try if
you haven't yet.
Thanks again to @mkennedy for the stickers!</p>
<a class="reference external image-reference" href="../../images/legomac/talkpythontome.jpg"><img alt="/images/legomac/talkpythontome.thumbnail.jpg" src="../../images/legomac/talkpythontome.thumbnail.jpg"></a>
<p>Below are a few pictures. You can see more on <a class="reference external" href="https://flic.kr/s/aHskVAadfo">flickr</a>.</p>

<div id="slides_f2d6b44ba75b4ba09eb37689e4ae5e3e" class="carousel slide">
    <ol class="carousel-indicators">
<li data-target="#slides_f2d6b44ba75b4ba09eb37689e4ae5e3e" data-slide-to="0" class="active">
            </li>
<li data-target="#slides_f2d6b44ba75b4ba09eb37689e4ae5e3e" data-slide-to="1">
            </li>
<li data-target="#slides_f2d6b44ba75b4ba09eb37689e4ae5e3e" data-slide-to="2">
            </li>
<li data-target="#slides_f2d6b44ba75b4ba09eb37689e4ae5e3e" data-slide-to="3">
            </li>
<li data-target="#slides_f2d6b44ba75b4ba09eb37689e4ae5e3e" data-slide-to="4">
            </li>
<li data-target="#slides_f2d6b44ba75b4ba09eb37689e4ae5e3e" data-slide-to="5">
            </li>
<li data-target="#slides_f2d6b44ba75b4ba09eb37689e4ae5e3e" data-slide-to="6">
            </li>
<li data-target="#slides_f2d6b44ba75b4ba09eb37689e4ae5e3e" data-slide-to="7">
            </li>
<li data-target="#slides_f2d6b44ba75b4ba09eb37689e4ae5e3e" data-slide-to="8">
    </li>
</ol>
<div class="carousel-inner">
                <div class="item active"><img src="../../images/legomac/legomac.jpg" alt="" style="margin: 0 auto 0 auto;"></div>
                <div class="item"><img src="../../images/legomac/legomac_front_close.jpg" alt="" style="margin: 0 auto 0 auto;"></div>
                <div class="item"><img src="../../images/legomac/talkpythontome.jpg" alt="" style="margin: 0 auto 0 auto;"></div>
                <div class="item"><img src="../../images/legomac/drilling_left.jpg" alt="" style="margin: 0 auto 0 auto;"></div>
                <div class="item"><img src="../../images/legomac/drilling_right.jpg" alt="" style="margin: 0 auto 0 auto;"></div>
                <div class="item"><img src="../../images/legomac/ribbon_cable.jpg" alt="" style="margin: 0 auto 0 auto;"></div>
                <div class="item"><img src="../../images/legomac/display_front.jpg" alt="" style="margin: 0 auto 0 auto;"></div>
                <div class="item"><img src="../../images/legomac/button_front.jpg" alt="" style="margin: 0 auto 0 auto;"></div>
                <div class="item"><img src="../../images/legomac/button_top.jpg" alt="" style="margin: 0 auto 0 auto;"></div>
    </div>
    <a class="left carousel-control" href="#slides_f2d6b44ba75b4ba09eb37689e4ae5e3e" data-slide="prev"><span class="icon-prev"></span></a>
    <a class="right carousel-control" href="#slides_f2d6b44ba75b4ba09eb37689e4ae5e3e" data-slide="next"><span class="icon-next"></span></a>
</div>

</div>
<div class="section" id="next">
<h2>Next</h2>
<p>I didn't build this LEGO Macintosh to use it as a simple clock :-)
I have a few ideas. I'll start with a small web server so that I can receive and display messages.
That will be the subject of another <a class="reference external" href="../experimenting-with-asyncio-on-a-raspberry-pi">blog post</a>!</p>
</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/lego/" rel="tag">lego</a></li>
            <li><a class="tag p-category" href="../../categories/mac/" rel="tag">Mac</a></li>
            <li><a class="tag p-category" href="../../categories/pi/" rel="tag">pi</a></li>
            <li><a class="tag p-category" href="../../categories/python/" rel="tag">python</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../dockerfile-anti-patterns-and-best-practices/" rel="prev" title="Dockerfile anti-patterns and best practices">Previous post</a>
            </li>
            <li class="next">
                <a href="../running-your-application-over-https-with-traefik/" rel="next" title="Running your application over HTTPS with traefik">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
        
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="tchutchut",
            disqus_url="http://beenje.github.io/blog/posts/my-lego-macintosh-classic-with-raspberry-pi-and-e-paper-display/",
        disqus_title="My LEGO Macintosh Classic with Raspberry Pi and e-paper display",
        disqus_identifier="cache/posts/my-lego-macintosh-classic-with-raspberry-pi-and-e-paper-display.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="tchutchut";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2017         <a href="mailto:beenje@gmail.com">Benjamin Bertrand</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
<img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a>
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-99836987-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
